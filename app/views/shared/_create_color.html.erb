<div class="row">
  <div class="col-12">
    <label class="form-label"></label>
    <input type="range" class="form-range" min="0" max="255" value="0" id="redRange">

    <label class="form-label"></label>
    <input type="range" class="form-range" min="0" max="255" value="0" id="greenRange">

    <label class="form-label"></label>
    <input type="range" class="form-range" min="0" max="255" value="0" id="blueRange">
  </div>

  <div class="col-12">
    <div id="colorPreview" class="border rounded p-1 text-center">
      rgb(0,0,0)
    </div>
  </div>
</div>

<script>
  function setColor(r, g, b) {
    const red = document.getElementById("redRange");
    const green = document.getElementById("greenRange");
    const blue = document.getElementById("blueRange");
    const preview = document.getElementById("colorPreview");

    if (!red || !green || !blue || !preview) return;

    const rgb =`rgb(${r}, ${g}, ${b})`;

    red.value = r;
    green.value = g;
    blue.value = b;

    preview.style.backgroundColor = rgb;
    preview.textContent = `R:${r} G:${g} B:${b}`;

    const brightness = (r * 299 + g * 587 + b * 114) / 1000;
    preview.style.color = brightness > 128 ? 'black' : 'white'; 

    red.style.background = `linear-gradient(to right, rgb(255,0,0), rgb(255,255,255))`;
    green.style.background = `linear-gradient(to right, rgb(0,255,0), rgb(255,255,255))`;
    blue.style.background = `linear-gradient(to right, rgb(0,0,255), rgb(255,255,255))`;

    currentColor = rgb;
  }

  document.addEventListener("turbo:load", () => {

    const red = document.getElementById("redRange");
    const green = document.getElementById("greenRange");
    const blue = document.getElementById("blueRange");

    if (!red || !green || !blue) return;

    function updateColorFromRange() {
      setColor(red.value, green.value, blue.value);
    }

    red.addEventListener("input",updateColorFromRange);
    green.addEventListener("input",updateColorFromRange);
    blue.addEventListener("input",updateColorFromRange);

    updateColorFromRange();
  });
</script>